<!DOCTYPE html>
<html th:fragment="layout (template, user)">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"
          th:href="@{/webjars/bootstrap/3.3.7-1/css/bootstrap.min.css}">

    <script src="/webjars/jquery/1.11.1/jquery.min.js"></script>

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
            integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
            crossorigin="anonymous" th:src="@{/webjars/bootstrap/3.3.7-1/js/bootstrap.min.js}"></script>
    <style>
        $navbar-white: #fafafa;
        $navbar-black: #131313;
        $navbar-active-color: #fafafa;
        $navbar-bg-active-color: #ff9900;
        $bg-light-blue: #00c6ff;
        $bg-dark-blue: #0072ff;

        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100vh;
        }
        .jumbo {
            padding-top: 150px;
            height: 200vh;
        }
        .navbar {
        a {
            color: $navbar-black;
        }
        li {
        &.active {
             background: $navbar-bg-active-color;
        a {
            color: $navbar-active-color;
        }
        }
        }
        .navbar-toggle {
        .icon-bar {
            background: $navbar-black;
        }
        }
        }

        .shrink {
        .navbar {
            color: $navbar-white;
            background: $bg-light-blue;
            background: -webkit-linear-gradient(55deg,$bg-light-blue 10%,$bg-dark-blue 90%);
            background: linear-gradient(35deg,$bg-light-blue 10%,$bg-dark-blue 90%);
        }
        .navbar-toggle {
        .icon-bar {
            background: $navbar-white;
        }
        }
        }
    </style>
</head>
<body>
<!-- Fixed navbar -->
<nav class="navbar navbar-fixed-top" style="background-color: #9C9C9C">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Book DB</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-right">
                <li class="active"><a th:href="@{/index}">Home</a></li>
                <li><a th:href="@{/top10}">Top 10 books</a></li>
                <li><a href="#contact">Genre</a></li>

                <li  class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" >Genre <span class="caret"></span></a>
                    <ul id="genre-drop" class="dropdown-menu">
                        <li><a th:href="@{/index}">All</a></li>
                        <li role="separator" class="divider">Genres</li>
                        <li><a th:href="@{/profile/booklist(type=reading)}">Reading</a></li>
                        <li><a th:href="@{/profile/booklist(type=read)}">Read</a></li>
                        <li><a th:href="@{/profile/booklist(type=willread)}">Will Read</a></li>
                    </ul>
                </li>

                <li  class="dropdown" th:if="${user != null}">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" >Profile <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a th:href="@{/profile}">Profile</a></li>
                        <li role="separator" class="divider"></li>
                        <li class="dropdown-header">Lists</li>
                        <li><a th:href="@{/profile/booklist(type=reading)}"></a></li>
                        <li><a th:href="@{/profile/booklist(type=read)}">Read</a></li>
                        <li><a th:href="@{/profile/booklist(type=willread)}">Will Read</a></li>
                    </ul>
                </li>
                <li th:if="${user == null}"><a th:href="@{/login}">Login</a></li>
            </ul>
        </div><!--/.nav-collapse -->
    </div>
</nav>

<div class="container-fluid" style="margin-top: 100px">
    <div class="container xd-container">
        <th:block th:include="${template}"/>
    </div>
</div>
<script>
    $(document).ready(function (){
        $.ajax({
            type : "GET",
            url : "/check",
            success : function (data){
                $.each(data, function (index,name){
                    let html = '<li><a href="../genre/'+name+'">' + name + '</a></li>';
                    $('#genre-drop').append(html);
                });
            }
        });
    });
</script>
</body>
</html>